# Роли

## Система ролей представлена следующими типами пользователей:

1. администратор

2. архивист

3. пользователь

Все пользователи **обязаны** авторизоваться

### 1. Админ

Имеет полный доступ ко всем функциям системы:

- создание, редактирование, удаление учётных записей, управление ролями и привелегиями других пользователей

- создание, редактирование, удаление записей об архивах и коллекциях, редактирование документов

- настройки параметров системы (журналирование, настройки доступа)

### 2. Архивист

- создание, редактирование, удаление записей об архивах и коллекциях, редактирование документов

- поиск документов, просмотр содержания

### 3. Пользователь

- поиск коллекций, просмотр документов

- добавление документов в избранное

- подписка на коллекции для получения уведомлений об обновлениях (например выходящий журнал)

# Реализация

![image](https://github.com/vikaaaaa555/DB_Labs/assets/90476803/fd5ae250-7c65-41d1-9bf4-6dabb9213c19)

## Сущности


### 1. user

Описывает пользователя

Поля:

- ***id***: уникальный id пользователся *(INT)*

- ***login***: логин *(VARCHAR(20))*

- ***password***: пароль *(VARCHAR(20))*

Связи:

- **One to one** с *profile*

- **One to many** с *user, role, action и author*


### 2. profile

Поля:

- ***id_user*** id пользователя *(INT)*

- ***first_name*** имя *(VARCHAR(20))*

- ***last_name*** фамилия *(VARCHAR(20))*

- ***email*** почта *(VARCHAR(30))*

- ***phone_number*** телефон *(VARCHAR(15))*

- ***birth_date*** дата рождения *(TIMESTAMP(8))*

Связи:

- **One to one** с *user*


### 3. role

Поля:

Роль, присваиваемая каждому пользователю

- ***id***: id присваиваемой роли *(INT)*

- ***type***: админ/архивист/пользователь *(VARCHAR(10))*

Связи:

- **One to many** с *user*


### 4. action

Журанлирование действий пользователя

Поля:

- ***id***: id действия *(INT)*

- ***timestamp***: запись времени когда произошло действие *(TIMESTAMP(10))*

Связи:

- **One to many** с *user*


### 5. action_type

Тип действия

Поля:

- ***id_action***: id действия *(INT)*

- ***typename***: название действия *(VARCHAR(45))*

Связи:

- **One to many** с *user*


### 6. author

Автор документа

Поля:

- ***id***: id автора *(INT)*

Связи:

- **One to many** с *user, document*


### 7. collection

Организация и группировка материалов

Поля:

- ***id***: id коллекции *(INT)*

- ***name***: название *(VARCHAR(20))*

- ***description***: описание *(TINYTEXT)*

Связи:

- **Many to many** с *user, document*


### 8. document

Элемент коллекции

Поля:

- ***id***: id документа *(INT)*

- ***title***: название *(VARCHAR(45))*

- ***description***: описание *(TINYTEXT)*

- ***date***: дата создания *(TIMESTAMP(10))*

Связи:

- **One to many** с *author, doc_type*

- **Many to many** с *collection, countrie, historical_figure*


### 9. doc_type

Тип документа

Поля:

- ***id***: id автора *(INT)*

- ***type_doc***: тип документа *(VARCHAR(10))*

Связи:

- **One to many** с *document*


### 10. historical_figure

Историческая личность

Поля:

- ***id***: id *(INT)*

- ***first_name***: имя *(VARCHAR(45))*

- ***last_name***: фамилия *(VARCHAR(45))*

- ***birth_date***: дата рождения *(DATE)*

- ***death_date***: дата смерти *(DATE)*

Связи:

- **Many to many** с *document, countrie*


### 11. countrie

Страна

Поля:

- ***id***: id страны *(INT)*

- ***name***: название *(VARCHAR(45))*

- ***start_date***: дата основания *(DATE)*

- ***over_date***: дата распада *(DATE)*

Связи:

- **Many to many** с *document, historical_figure*
